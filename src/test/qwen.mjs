import OpenAI from "openai";
const DASHSCOPE_API_KEY = `sk-2230430882b44c8cb02e602d474f95b7`
const openai = new OpenAI(
    {
        apiKey: DASHSCOPE_API_KEY,
        baseURL:"https://dashscope.aliyuncs.com/compatible-mode/v1"
    }
);

let defaultData = `
| ‰∫§ÊòìÊó•Êúü     | ËÇ°Á•®‰ª£Á†Å | ËÇ°Á•®ÂêçÁß∞(‰∏≠Êñá) | ‰∫§Êòì‰ø°Âè∑ÂêçÁß∞ | ÂΩìÊó•Êî∂Áõò‰ª∑ | ÂΩìÊó•Êî∂Áõä | Âë®ÊúüÁ¥ØÁßØÊî∂Áõä | ÂΩìÊó•Êî∂ÁõäÁéá | Âë®ÊúüÁ¥ØÁßØÊî∂ÁõäÁéá | Âë®ÊúüÁ¥ØÁßØÊ∂®ÂπÖ | Ê∫¢‰ª∑Áéá%    | È£éÈô©ÊåáÊï∞%    | Á¥ØÁßØËá™Áî±ÊµÅÈÄöËÇ°Êç¢ÊâãÁéá | ÂΩìÊó•Ëá™Áî±ÊµÅÈÄöËÇ°Êç¢ÊâãÁéá |
|:------------|:---------|:---------------|:-------------|:-----------|:---------|:-------------|:-----------|:---------------|:-------------|:-----------|:-------------|:----------------------|:----------------------|
| 2025-06-20  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 12.00      | -0.170   | -0.170       | -1.40      | -1.40          | -1.397       | 58.77600   | 127.1700     | 23.3500               | 10.38                 |
| 2025-06-19  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell         | 12.17      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 61.16700   | 128.1800     | 12.9700               | 12.97                 |
| 2025-06-18  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 13.01      | -0.160   | -0.240       | -1.21      | -1.82          | -1.819       | 72.98200   | 132.8200     | 51.8200               | 12.34                 |
| 2025-06-17  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 13.17      | -0.080   | -0.080       | -0.60      | -0.60          | -0.604       | 75.23200   | 133.6400     | 39.4800               | 18.69                 |
| 2025-06-16  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy          | 13.25      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 76.35700   | 134.0400     | 20.7900               | 20.79                 |
| 2025-06-13  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell         | 12.73      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 69.04400   | 131.3400     | 14.7300               | 14.73                 |
| 2025-06-12  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 13.06      | -0.520   | -0.310       | -3.83      | -2.20          | -2.201       | 73.68500   | 133.0800     | 89.5800               | 17.53                 |
| 2025-06-11  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 13.58      | 0.440    | 0.210        | 3.35       | 1.63           | 1.628        | 80.99900   | 135.6400     | 72.0500               | 27.28                 |
| 2025-06-10  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 13.14      | -0.230   | -0.230       | -1.72      | -1.72          | -1.720       | 74.81000   | 133.4900     | 44.7700               | 24.31                 |
| 2025-06-09  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy          | 13.37      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 78.04500   | 134.6300     | 20.4600               | 20.46                 |
| 2025-06-06  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell         | 13.04      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 73.40400   | 132.9800     | 17.2800               | 17.28                 |
| 2025-06-05  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 13.03      | -0.710   | -0.710       | -5.17      | -5.17          | -5.167       | 73.26300   | 132.9200     | 58.4400               | 25.59                 |
| 2025-06-04  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy          | 13.74      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 83.24900   | 136.3900     | 32.8500               | 32.85                 |
| 2025-06-03  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 13.07      | 0.290    | -4.030       | 2.27       | -24.93         | -24.943      | 73.82600   | 133.1300     | 414.1500              | 18.49                 |
| 2025-05-30  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 12.78      | -0.920   | -4.320       | -6.72      | -27.20         | -27.212      | 69.74700   | 131.6100     | 395.6600              | 25.83                 |
| 2025-05-29  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 13.70      | -0.630   | -3.400       | -4.40      | -20.49         | -20.496      | 82.68600   | 136.2000     | 369.8300              | 30.77                 |
| 2025-05-28  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 14.33      | -0.970   | -2.770       | -6.34      | -16.09         | -16.100      | 91.54700   | 139.0100     | 339.0600              | 38.34                 |
| 2025-05-27  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 15.30      | 0.940    | -1.800       | 6.55       | -9.75          | -9.760       | 105.19000  | 142.8800     | 300.7200              | 49.19                 |
| 2025-05-26  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 14.36      | 0.100    | -2.740       | 0.70       | -16.30         | -16.310      | 91.96900   | 139.1400     | 251.5300              | 28.96                 |
| 2025-05-23  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 14.26      | -0.180   | -2.840       | -1.25      | -17.00         | -17.010      | 90.56300   | 138.7100     | 222.5700              | 27.00                 |
| 2025-05-22  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 14.44      | -1.600   | -2.660       | -9.98      | -15.75         | -15.760      | 93.09400   | 139.4700     | 195.5700              | 37.34                 |
| 2025-05-21  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 16.04      | 0.650    | -1.060       | 4.22       | -5.78          | -5.780       | 115.59800  | 145.5100     | 158.2300              | 52.48                 |
| 2025-05-20  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 15.39      | -1.710   | -1.710       | -10.00     | -10.00         | -10.000      | 106.45600  | 143.2100     | 105.7500              | 43.90                 |
| 2025-05-19  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell         | 17.10      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 130.50600  | 148.8900     | 61.8500               | 61.85                 |
| 2025-05-16  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy          | 18.39      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 148.65000  | 152.4700     | 67.2600               | 67.26                 |
| 2025-05-15  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell         | 16.72      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 125.16200  | 147.7300     | 66.0800               | 66.08                 |
| 2025-05-14  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 17.31      | 0.640    | 4.790        | 3.84       | 33.88          | 33.870       | 133.46000  | 149.5100     | 277.5600              | 72.60                 |
| 2025-05-13  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 16.67      | 1.520    | 4.150        | 10.03      | 30.04          | 30.030       | 124.45900  | 147.5700     | 204.9600              | 45.69                 |
| 2025-05-12  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 15.15      | 1.380    | 2.630        | 10.02      | 20.01          | 20.000       | 103.08000  | 142.3100     | 159.2700              | 49.53                 |
| 2025-05-09  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 13.77      | 1.250    | 1.250        | 9.98       | 9.98           | 9.980        | 83.67100   | 136.5300     | 109.7400              | 51.36                 |
| 2025-05-08  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy          | 12.52      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 66.09000   | 130.1900     | 58.3800               | 58.38                 |
| 2025-05-07  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 11.91      | 1.080    | 0.200        | 9.97       | 2.46           | 2.460        | 57.51100   | 126.6200     | 156.9000              | 51.68                 |
| 2025-05-06  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 10.83      | -0.880   | -0.880       | -7.51      | -7.51          | -7.510       | 42.32100   | 119.3000     | 105.2200              | 43.28                 |
| 2025-04-30  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell         | 11.71      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 54.69800   | 125.3600     | 61.9400               | 61.94                 |
| 2025-04-29  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy          | 13.01      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 72.98200   | 132.8200     | 53.1100               | 53.11                 |
| 2025-04-28  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 11.83      | -0.380   | 1.010        | -3.11      | 9.47           | 9.480        | 56.38500   | 126.1200     | 229.0800              | 50.73                 |
| 2025-04-25  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 12.21      | 0.310    | 1.390        | 2.61       | 12.59          | 12.590       | 61.73000   | 128.4200     | 178.3500              | 60.71                 |
| 2025-04-24  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell-hold    | 11.90      | 1.080    | 1.080        | 9.98       | 9.98           | 9.980        | 57.37000   | 126.5500     | 117.6400              | 55.09                 |
| 2025-04-23  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | sell         | 10.82      | 0.000    | 0.000        | 0.00       | 0.00           | 0.000        | 42.18000   | 119.2200     | 62.5500               | 62.55                 |
| 2025-04-22  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 11.59      | 1.050    | 4.110        | 9.96       | 45.83          | 45.820       | 53.01000   | 124.5900     | 191.1600              | 60.02                 |
| 2025-04-21  | 002809   | Á∫¢Â¢ôËÇ°‰ªΩ       | buy-hold     | 10.54      | 0.960    | 3.060        | 10.02      | 35.86          | 35.860       | 38.24200   | 117.0800     | 131.1400              | 61.30                 |
`

let template = `
### üìà ËÇ°Á•®ÂàÜÊûêÊåá‰ª§Ê®°Êùø
**ËØ∑Âü∫‰∫é‰ª•‰∏ãÊï∞ÊçÆÁîüÊàêÊûÅÁÆÄÊäïËµÑÂª∫ËÆÆÔºö**

${defaultData}

---
### üéØ Ê†∏ÂøÉË¶ÅÊ±Ç
1. **Ë∂ãÂäøÂÆö‰Ωç**ÔºàÂøÖÈÄâÔºâÔºö
   - ËØÜÂà´Áü≠ÊúüÔºà3-5Êó•Ôºâ/‰∏≠ÊúüÔºà1-3ÊúàÔºâÂÖ≥ÈîÆÊñπÂêë  
   - Ê†áÊ≥®Ê†∏ÂøÉÊîØÊíë/ÂéãÂäõ‰ΩçÔºàÁ≤æÁ°Æ‰ª∑‰ΩçÔºâ
   - Á§∫‰æãÔºö\`üìâ3Êó•ËøûË∑å-6% | ÊîØÊíë¬•13.0\`

2. **ÂÖ≥ÈîÆÊåáÊ†á**ÔºàÂøÖÈÄâÔºâÔºö
   - Ê∫¢‰ª∑ÁéáÔºö\`<15%=üü¢ | 15-25%=üü° | >25%=üî¥\`
   - È£éÈô©ÊåáÊï∞Ôºö\`<100%=üü¢ | ‚â•100%=üî¥\`
   - ÈáèËÉΩÊ†áËÆ∞ÔºöÊç¢ÊâãÁéáÁ™ÅÂ¢û/ËêéÁº©ÔºàÂ∏¶ÂπÖÂ∫¶Ôºâ

3. **‰ø°Âè∑Ëß£Á†Å**ÔºàÂøÖÈÄâÔºâÔºö
   - ÂΩìÂâç‰∫§Êòì‰ø°Âè∑Áä∂ÊÄÅÔºàÂ¶Ç"sell-hold"Ôºâ
   - ÊúÄËøë‰π∞Âçñ‰ø°Âè∑Êó•Êúü/‰ª∑‰Ωç
   - ËΩ¨ÊäòËß¶ÂèëÊù°‰ª∂ÔºàÂ¶Ç"Ê∫¢‰ª∑Áéá<15%+ÂçïÊó•Êç¢Êâã<5%"Ôºâ

4. **Êìç‰ΩúÁ≠ñÁï•**Ôºà‰∫åÈÄâ‰∏ÄÔºâÔºö
   - ÊåÅ‰ªìÊñπÊ°àÔºö\`Ê≠¢Êçü‰Ωç__ | Âä†‰ªì‰Ωç__ | Âáè‰ªì‰Ωç__\`
   - ÊåÅÂ∏ÅÊñπÊ°àÔºö\`‰ªãÂÖ•Êù°‰ª∂__ | ËßÇÊúõÊù°‰ª∂__\`

5. **ÁªàÊûÅÁªìËÆ∫**ÔºàÂøÖÈÄâÔºâÔºö
   - 20Â≠óÂÜÖË∂ãÂäøÂÆöÊÄß + ÂÖ≥ÈîÆË°åÂä®ËØç  
   - Á§∫‰æãÔºö\`‰∏≠ÊúüÂçáÂäøÊú™Á†¥ÔºåÂÆàÊîØÊíëÁ≠â‰ºÅÁ®≥\`
`

async function main(msg) {
  const completion = await openai.chat.completions.create({
    messages: [
      {role: "system", content: "You are a helpful assistant." },
      {role: "user", content: msg||"" }
    ],
    model: "qwen-turbo-latest",
  });
  const ret = completion.choices[0]['message']['content'];
  console.log(ret);
  return ret;
}

// main();
// export default main


main(template)